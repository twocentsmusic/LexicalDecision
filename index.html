<!DOCTYPE html>
<html>
  <head>
    <title>Lexical Decision Task</title>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/jspsychsheet.js"></script>
    <script src="jspsych/plugin-survey-text.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-html-button-response.js"></script>
    <script src="jspsych/plugin-preload.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
    <link href="jspsych/jspsychsheet.css" rel="stylesheet" type="text/css" />
  </head>
  <body> <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>
        .jspsych-display-element {
            font-size: 24px;
        }
    </style>
</head>
  <body></body>
  <script>

var jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
      },
      default_iti: 250
    });

      var timeline = [];

      var instructions = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>Each screen will show either an English word or letters that do not form a word.</p>'+
          '<p>Press c if the letters form a valid word.</p><p>Press n if the letters do not form a valid word.</p>',
        choices: ['Ready to start']
      };
      timeline.push(instructions);

      var stimuli = [
        {word: 'woman', word_validity: 'valid', word_frequency: 'high'},
        {word: 'title', word_validity: 'valid', word_frequency: 'high'},
        {word: 'speed', word_validity: 'valid', word_frequency: 'high'},
        {word: 'movie', word_validity: 'valid', word_frequency: 'high'},
        {word: 'night', word_validity: 'valid', word_frequency: 'high'},
        {word: 'house', word_validity: 'valid', word_frequency: 'high'},
        {word: 'child', word_validity: 'valid', word_frequency: 'high'},
        {word: 'apple', word_validity: 'valid', word_frequency: 'high'},
        {word: 'books', word_validity: 'valid', word_frequency: 'high'},
        {word: 'table', word_validity: 'valid', word_frequency: 'high'},
        {word: 'plant', word_validity: 'valid', word_frequency: 'high'},
        {word: 'water', word_validity: 'valid', word_frequency: 'high'},
        {word: 'heart', word_validity: 'valid', word_frequency: 'high'},
        {word: 'glass', word_validity: 'valid', word_frequency: 'high'},
        {word: 'world', word_validity: 'valid', word_frequency: 'high'},
        {word: 'bread', word_validity: 'valid', word_frequency: 'high'},
        {word: 'money', word_validity: 'valid', word_frequency: 'high'},
        {word: 'brain', word_validity: 'valid', word_frequency: 'high'},
        {word: 'stone', word_validity: 'valid', word_frequency: 'high'},
        {word: 'clock', word_validity: 'valid', word_frequency: 'high'},
        {word: 'whigs', word_validity: 'valid', word_frequency: 'low'},
        {word: 'pecan', word_validity: 'valid', word_frequency: 'low'},
        {word: 'hanky', word_validity: 'valid', word_frequency: 'low'},
        {word: 'femur', word_validity: 'valid', word_frequency: 'low'},
        {word: 'tusks', word_validity: 'valid', word_frequency: 'low'},
        {word: 'tongs', word_validity: 'valid', word_frequency: 'low'},
        {word: 'petal', word_validity: 'valid', word_frequency: 'low'},
        {word: 'dunce', word_validity: 'valid', word_frequency: 'low'},
        {word: 'friar', word_validity: 'valid', word_frequency: 'low'},
        {word: 'gable', word_validity: 'valid', word_frequency: 'low'},
        {word: 'baron', word_validity: 'valid', word_frequency: 'low'},
        {word: 'glint', word_validity: 'valid', word_frequency: 'low'},
        {word: 'lynch', word_validity: 'valid', word_frequency: 'low'},
        {word: 'mirth', word_validity: 'valid', word_frequency: 'low'},
        {word: 'plume', word_validity: 'valid', word_frequency: 'low'},
        {word: 'tryst', word_validity: 'valid', word_frequency: 'low'},
        {word: 'sheaf', word_validity: 'valid', word_frequency: 'low'},
        {word: 'adage', word_validity: 'valid', word_frequency: 'low'},
        {word: 'lurid', word_validity: 'valid', word_frequency: 'low'},
        {word: 'niche', word_validity: 'valid', word_frequency: 'low'},
        {word: 'florn', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'brast', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'glarn', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'tworp', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'plint', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'smuth', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'gralk', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'droft', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'splar', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'drint', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'bloth', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'trilm', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'gluft', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'thrip', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'wrent', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'spirl', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'blenk', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'drisp', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'plorm', word_validity: 'invalid', word_frequency: 'NA'},
        {word: 'krith', word_validity: 'invalid', word_frequency: 'NA'},
      ];

    var trials = {
      timeline_variables: stimuli,
      randomize_order: true,
      timeline: [
        {
          type: jsPsychHtmlKeyboardResponse,
          stimulus: '+',
          choices: "NO_KEYS",
          trial_duration: 500,
          post_trial_gap: 0,
          css_classes: ['stimulus']
        },
        {
          type: jsPsychHtmlKeyboardResponse,
          stimulus: jsPsych.timelineVariable('word'),
          choices: ['c','n'],
          post_trial_gap: 0,
          css_classes: ['stimulus'],
          data: {
            word_validity: jsPsych.timelineVariable('word_validity'),
            word_frequency: jsPsych.timelineVariable('word_frequency')
          },
          on_finish: function(data) {
            if (data.word_validity == 'valid') {
              var correct = jsPsych.pluginAPI.compareKeys(data.response, 'c');
            } else {
              var correct = jsPsych.pluginAPI.compareKeys(data.response, 'n');
            }
            data.correct = correct;
          }
        }
      ]
    };
    timeline.push(trials);

    var debrief = {
      type: jsPsychHtmlKeyboardResponse,
      choices: ['c'],
      stimulus: function(data) {
        var high_rt = jsPsych.data.get().filter({word_frequency: 'high', correct: true}).select('rt').mean();
        var low_rt = jsPsych.data.get().filter({word_frequency: 'low', correct: true}).select('rt').mean();
        var message = "<p>All done!</p>"+
          "<p>Your average correct response time for high frequency English words was "+Math.round(high_rt)+"ms.</p>"+
          "<p>Your average correct response time for low frequency English words was "+Math.round(low_rt)+"ms.</p>"+
          "<p>The typical pattern of results is that people are faster to respond to high frequency (common) "+
          "word than low frequency (uncommon) words.</p>"+
          "<p>Press c to see the entire set of data generated by this experiment.</p>";
          return message;
      }
    };
    timeline.push(debrief);

    jsPsych.run(timeline);

    </script>
  </body>
</html>
